var nt=Object.defineProperty;var rt=(I,v,D)=>v in I?nt(I,v,{enumerable:!0,configurable:!0,writable:!0,value:D}):I[v]=D;var d=(I,v,D)=>rt(I,typeof v!="symbol"?v+"":v,D);(function(){"use strict";class I{constructor(){d(this,"data",new BigUint64Array(65536*256+1));d(this,"count",0)}get max_iteration(){return 15/65537*this.data.length|0}hash(t){return t=BigInt.asUintN(64,(t>>16n^t)*0x45d9f3bn),t=BigInt.asUintN(64,(t>>16n^t)*0x45d9f3bn),Number(t%BigInt(this.data.length))}add(t){let e=this.hash(t);const i=e;for(let s=0;s<this.max_iteration;++s){if(this.data[e]==t)return!1;if(this.data[e]==0n)return this.data[e]=t,this.count++,!0;e=(i+(s+1))%this.data.length}return this.rehash(),this.add(t)}has(t){let e=this.hash(t);const i=e;for(let s=0;s<this.max_iteration;++s){if(this.data[e]==t)return!0;if(this.data[e]==0n)return!1;e=(i+(s+1))%this.data.length}return!1}size(){return this.count}rehash(){const t=this.data;this.data=new BigUint64Array((this.data.length-1)*2+1),this.count=0;for(let e=0;e<t.length;++e)t[e]!=0n&&this.add(t[e])}}class v{constructor(){d(this,"data",new Array)}push(t){const e=this.data;if(e.push(t),e.length==1)return;let i=e.length-1,s=(i-1)/2|0;for(;i>0&&e[i].f<e[s].f;){const n=e[i];e[i]=e[s],e[s]=n,i=s,s=(i-1)/2|0}}pop(){const t=this.data,e=t[0];t[0]=t[t.length-1],t.pop();let i=0;for(;i<t.length;){let s=i;const n=i*2+1,o=i*2+2;if(n<t.length&&t[n].f<t[s].f&&(s=n),o<t.length&&t[o].f<t[s].f&&(s=o),s===i)break;const h=t[i];t[i]=t[s],t[s]=h,i=s}return e}isEmpty(){return this.data.length===0}}class D{constructor(t){this.heuristic=t}solve(t){const e=new v,i=y.fromArrayUint(t);if(i.isSolution())return{ok:!0,operations:[],visitedStates:1};e.push({value:i,depth:0,f:0});const s=new I;for(;!e.isEmpty();){const n=e.pop();if(n.value.isSolution()){const h=new Array(n.depth);for(let f=n;f.op!==void 0;f=f.from)h[f.depth-1]=f.op;return{ok:!0,operations:h,visitedStates:s.size()}}if(!s.add(n.value.hash64()))continue;const o=n.op;for(let h=0;h<4;++h){const f=h;if(f===r.DOWN&&o===r.UP||f===r.UP&&o===r.DOWN||f===r.LEFT&&o===r.RIGHT||f===r.RIGHT&&o===r.LEFT||!n.value.canMove(f))continue;const l=n.value.makeMove(f),u=n.depth+1;e.push({from:n,op:f,value:l,depth:u,f:u+l[this.heuristic]()})}}return{ok:!1,operations:[],visitedStates:s.size()}}}class M{constructor(t=4096){d(this,"next");d(this,"data");d(this,"length",0);d(this,"head",0);this.cap=t,this.data=new Array(t)}get can_push(){return this.length<this.cap}get can_pop(){return this.head<this.length}push(t){this.data[this.length++]=t}pop(){return this.data[this.head++]}reset(){this.length=0,this.head=0,this.next=void 0}}class N{constructor(){d(this,"pull",[]);d(this,"head",new M);d(this,"tail",this.head)}push(t){if(!this.tail.can_push){const e=this.newChunk();this.tail.next=e,this.tail=e}this.tail.push(t)}pop(){if(this.head.can_pop)return this.head.pop();if(this.head.can_push||!this.head.next)throw new Error("Unexpected pop from empty queue");return this.pull.push(this.head),this.head=this.head.next,this.head.pop()}isEmpty(){return this.head===this.tail&&!this.head.can_pop}newChunk(){return new M}}let O=class{constructor(){d(this,"fields",new BigUint64Array(65536/4*256));d(this,"data",new Int32Array(65536*256));d(this,"index",0)}push(t,e,i,s,n){if(this.index+=1,this.data.length<=this.index*4){const h=new Int32Array(this.data.length*2),f=new BigUint64Array(this.fields.length*2);for(let l=0;l<this.data.length;++l)h[l]=this.data[l];for(let l=0;l<this.fields.length;++l)f[l]=this.fields[l];this.data=h,this.fields=f}const o=(this.index-1)*4;this.data[o+0]=t,this.data[o+1]=e,this.data[o+2]=s,this.data[o+3]=n,this.fields[this.index-1]=i}from(t){return this.data[t*4+0]}op(t){return this.data[t*4+1]}valueField(t){return this.fields[t]}valueEmpty(t){return this.data[t*4+2]}depth(t){return this.data[t*4+3]}length(){return this.index}},L=class{constructor(t){this.newSet=t}solve(t){const e=new O,i=w.fromArray(t);if(i.isSolution())return{ok:!0,operations:[],visitedStates:1};e.push(-1,-1,i.field,i.empty,0);const s=this.newSet();s.add(i.hash64());for(let n=0;n<e.length();++n){const o=e.valueField(n),h=e.valueEmpty(n),f=e.depth(n),l=e.op(n);for(let u=0;u<4;++u){const c=u;if(c===r.DOWN&&l===r.UP||c===r.UP&&l===r.DOWN||c===r.LEFT&&l===r.RIGHT||c===r.RIGHT&&l===r.LEFT||!w.canMove(h,c))continue;const[S,k]=w.makeMove(o,h,c);if(s.add(S)){if(S===w.solution){const m=new Array(f+1);m[f]=c;for(let x=n;e.op(x)>=0;x=e.from(x))m[e.depth(x)-1]=e.op(x);return{ok:!0,operations:m,visitedStates:s.size()}}e.push(n,c,S,k,f+1)}}}return{ok:!1,operations:[],visitedStates:s.size()}}};class R{constructor(t){d(this,"maxDepth",0);d(this,"solution",[]);d(this,"visitedStates",0);d(this,"nextDepth",0);this.heuristic=t}solve(t){this.maxDepth=1,this.solution=[],this.visitedStates=0;const e=y.fromArrayUint(t);for(let i=e[this.heuristic]();i<=80;i=this.nextDepth)if(this.maxDepth=i,this.nextDepth=81,this.dfs(e,-1))return{ok:!0,operations:this.solution,visitedStates:this.visitedStates};return{ok:!1,operations:[],visitedStates:this.visitedStates}}dfs(t,e,i=0){if(this.visitedStates++,t.isSolution())return this.solution=new Array(i),this.solution[i-1]=e,!0;const s=i+t[this.heuristic]();if(s>this.maxDepth)return s<this.nextDepth&&(this.nextDepth=s),!1;if(e!=r.RIGHT&&t.canMove(r.LEFT)){if(t.makeMoveInPlace(r.LEFT),this.dfs(t,r.LEFT,i+1))return i>0&&(this.solution[i-1]=e),!0;t.makeMoveInPlace(r.RIGHT)}if(e!=r.UP&&t.canMove(r.DOWN)){if(t.makeMoveInPlace(r.DOWN),this.dfs(t,r.DOWN,i+1))return i>0&&(this.solution[i-1]=e),!0;t.makeMoveInPlace(r.UP)}if(e!=r.LEFT&&t.canMove(r.RIGHT)){if(t.makeMoveInPlace(r.RIGHT),this.dfs(t,r.RIGHT,i+1))return i>0&&(this.solution[i-1]=e),!0;t.makeMoveInPlace(r.LEFT)}if(e!=r.DOWN&&t.canMove(r.UP)){if(t.makeMoveInPlace(r.UP),this.dfs(t,r.UP,i+1))return i>0&&(this.solution[i-1]=e),!0;t.makeMoveInPlace(r.DOWN)}return!1}}class H{constructor(){d(this,"maxDepth",0);d(this,"solution",[]);d(this,"visitedStates",0)}solve(t){this.maxDepth=1,this.solution=[],this.visitedStates=0;const e=w.fromArray(t);for(let i=1;i<=80;i++)if(this.maxDepth=i,this.dfs(e,-1))return{ok:!0,operations:this.solution,visitedStates:this.visitedStates};return{ok:!1,operations:[],visitedStates:this.visitedStates}}dfs(t,e,i=0){return this.visitedStates++,t.isSolution()?(this.solution=new Array(i),this.solution[i-1]=e,!0):i===this.maxDepth?!1:e!=r.RIGHT&&t.canMove(r.LEFT)&&this.dfs(t.makeMove(r.LEFT),r.LEFT,i+1)?(i>0&&(this.solution[i-1]=e),!0):e!=r.UP&&t.canMove(r.DOWN)&&this.dfs(t.makeMove(r.DOWN),r.DOWN,i+1)?(i>0&&(this.solution[i-1]=e),!0):e!=r.LEFT&&t.canMove(r.RIGHT)&&this.dfs(t.makeMove(r.RIGHT),r.RIGHT,i+1)?(i>0&&(this.solution[i-1]=e),!0):e!=r.DOWN&&t.canMove(r.UP)&&this.dfs(t.makeMove(r.UP),r.UP,i+1)?(i>0&&(this.solution[i-1]=e),!0):!1}}class W{constructor(){d(this,"maxDepth",0);d(this,"solution",[]);d(this,"visitedStates",0)}solve(t){this.maxDepth=1,this.solution=[],this.visitedStates=0;const e=y.fromArrayUint(t);for(let i=1;i<=80;i++)if(this.maxDepth=i,this.dfs(e,-1))return{ok:!0,operations:this.solution,visitedStates:this.visitedStates};return{ok:!1,operations:[],visitedStates:this.visitedStates}}dfs(t,e,i=0){if(this.visitedStates++,t.isSolution())return this.solution=new Array(i),this.solution[i-1]=e,!0;if(i===this.maxDepth)return!1;if(e!=r.RIGHT&&t.canMove(r.LEFT)){if(t.makeMoveInPlace(r.LEFT),this.dfs(t,r.LEFT,i+1))return i>0&&(this.solution[i-1]=e),!0;t.makeMoveInPlace(r.RIGHT)}if(e!=r.UP&&t.canMove(r.DOWN)){if(t.makeMoveInPlace(r.DOWN),this.dfs(t,r.DOWN,i+1))return i>0&&(this.solution[i-1]=e),!0;t.makeMoveInPlace(r.UP)}if(e!=r.LEFT&&t.canMove(r.RIGHT)){if(t.makeMoveInPlace(r.RIGHT),this.dfs(t,r.RIGHT,i+1))return i>0&&(this.solution[i-1]=e),!0;t.makeMoveInPlace(r.LEFT)}if(e!=r.DOWN&&t.canMove(r.UP)){if(t.makeMoveInPlace(r.UP),this.dfs(t,r.UP,i+1))return i>0&&(this.solution[i-1]=e),!0;t.makeMoveInPlace(r.DOWN)}return!1}}class G{solve(t){const e=new z,i=w.fromArray(t);if(i.isSolution())return{ok:!0,operations:[],visitedStates:1};let s=1;for(let n=1;n<=80;n++)for(e.push(-1,-1,i.field,i.empty,0,0);e.length();){const o=e.index-1,h=e.valueField(o),f=e.valueEmpty(o),l=e.depth(o);if(e.progress(o)){e.pop();continue}e.setProgress(o,1);const c=j(e.op(o));for(let S=0;S<4;++S){const k=S;if(k===c||!w.canMove(f,k))continue;const[m,x]=w.makeMove(h,f,k);if(s++,m===w.solution){const A=new Array(l+1);A[l]=k;for(let E=o;e.op(E)>=0;E=e.from(E))A[e.depth(E)-1]=e.op(E);return{ok:!0,operations:A,visitedStates:s}}l+1<n&&e.push(o,k,m,x,0,l+1)}l===n&&e.pop()}return{ok:!1,operations:[],visitedStates:s}}}class z{constructor(){d(this,"fields",new BigUint64Array(80*4));d(this,"data",new Int32Array(80*4*5));d(this,"index",0)}pop(){this.index-=1}push(t,e,i,s,n,o){if(this.index+=1,this.data.length<=this.index*5){console.log("UNEXPECTED RESIZE",this.data.length,this.index,o);const f=new Int32Array(this.data.length*2),l=new BigUint64Array(this.fields.length*2);for(let u=0;u<this.data.length;++u)f[u]=this.data[u];for(let u=0;u<this.fields.length;++u)l[u]=this.fields[u];this.data=f,this.fields=l}const h=(this.index-1)*5;this.data[h+0]=t,this.data[h+1]=e,this.data[h+2]=s,this.data[h+3]=n,this.data[h+4]=o,this.fields[this.index-1]=i}from(t){return this.data[t*5+0]}op(t){return this.data[t*5+1]}valueField(t){return this.fields[t]}valueEmpty(t){return this.data[t*5+2]}progress(t){return this.data[t*5+3]}setProgress(t,e){this.data[t*5+3]=e}depth(t){return this.data[t*5+4]}length(){return this.index}}var r=(a=>(a[a.UP=0]="UP",a[a.RIGHT=1]="RIGHT",a[a.DOWN=2]="DOWN",a[a.LEFT=3]="LEFT",a))(r||{});function $(a,t){switch(a){case 0:return new L(()=>new I);case 3:return new H;case 4:return new G;case 1:return new W;case 2:return new R(t);case 5:return new D(t)}}function j(a){switch(a){case 0:return 2;case 1:return 3;case 2:return 0;case 3:return 1}return-1}class y{constructor(t,e){this.field=t,this.empty=e}static fromArray(t){let e=0;for(let i=0;i<16;i++)if(t[i]===0){e=i;break}return new y(t.slice(0),e)}static fromArrayUint(t){const e=new Uint8Array(16);let i=0;for(let s=0;s<16;s++)t[s]===0&&(i=s),e[s]=t[s];return new y(e,i)}canMove(t){const e=this.empty%4;switch(t){case 0:return this.empty>3;case 2:return this.empty<12;case 3:return e>0;case 1:return e<3}return!1}makeMove(t){return this.copy().makeMoveInPlace(t)}makeMoveInPlace(t){let e=this.empty;switch(t){case 0:e=this.empty-4;break;case 2:e=this.empty+4;break;case 3:e=this.empty-1;break;case 1:e=this.empty+1;break}return this.field[this.empty]=this.field[e],this.field[e]=0,this.empty=e,this}copy(){return new y(this.field.slice(0),this.empty)}hash64(){const t=this.field,e=BigInt(t[3]<<12|t[2]<<8|t[1]<<4|t[0]),i=BigInt(t[7]<<12|t[6]<<8|t[5]<<4|t[4]),s=BigInt(t[11]<<12|t[10]<<8|t[9]<<4|t[8]),n=BigInt(t[15]<<12|t[14]<<8|t[13]<<4|t[12]);return BigInt.asUintN(64,n<<48n|s<<32n|i<<16n|e)}isSolution(){if(this.empty!=15)return!1;for(let t=0;t<15;t++)if(this.field[t]!=t+1)return!1;return!0}heuristicCount(){let t=0;for(let e=0;e<15;++e)t+=+(this.field[e]!==e+1);return t}heuristicManhattan(){let t=0;for(let e=0;e<4;++e)for(let i=0;i<4;++i){let s=this.field[e*4+i];if(!s)continue;s-=1;const n=s/4|0,o=s%4;t+=Math.abs(n-e)+Math.abs(o-i)}return t}heuristicLinearConflict(){let t=0;for(let e=0;e<4;++e)for(let i=0;i<4;++i){const s=e*4;let n=this.field[s+i];if(!n)continue;n-=1;const o=n%4,h=n/4|0;if(t+=Math.abs(h-e)+Math.abs(o-i),h===e)for(let f=i+1;f<4;++f){let l=this.field[s+f];l&&(l-=1,(l/4|0)===e&&l<n&&(t+=2))}if(o===i)for(let f=e+1;f<4;++f){let l=this.field[f*4+i];l&&(l-=1,l%4===i&&l<n&&(t+=2))}}return t}heuristicCornerConflict(){let t=0;const e=new Array(16),i=new Array(16);for(let s=0;s<4;++s)for(let n=0;n<4;++n){const o=s*4;let h=this.field[o+n];if(!h)continue;h-=1;const f=h%4,l=h/4|0;if(t+=Math.abs(l-s)+Math.abs(f-n),l===s)for(let u=n+1;u<4;++u){let c=this.field[o+u];c&&(c-=1,(c/4|0)===s&&c<h&&(t+=2,e[h]=!0,e[c]=!0))}if(f===n)for(let u=s+1;u<4;++u){let c=this.field[u*4+n];c&&(c-=1,c%4===n&&c<h&&(t+=2,i[h]=!0,i[c]=!0))}}return this.field[3]!==4&&this.field[3]!=0&&(!e[2]&&this.field[2]===3&&(t+=2),!i[7]&&this.field[7]===8&&(t+=2)),this.field[0]!==1&&this.field[0]!=0&&(!e[1]&&this.field[1]===2&&(t+=2),!i[4]&&this.field[4]===5&&(t+=2)),this.field[12]!==13&&this.field[12]!=0&&(!e[13]&&this.field[13]===14&&(t+=2),!i[8]&&this.field[8]===9&&(t+=2)),t}conflictStatistics(){const t=new Array(16).fill(!1),e=new Array(16).fill(!1),i=new Array(16).fill(!1);for(let s=0;s<4;++s)for(let n=0;n<4;++n){const o=s*4;let h=this.field[o+n];if(!h)continue;h-=1;const f=h%4;if((h/4|0)===s)for(let u=n+1;u<4;++u){let c=this.field[o+u];c&&(c-=1,(c/4|0)===s&&c<h&&(t[h]=!0,t[c]=!0))}if(f===n)for(let u=s+1;u<4;++u){let c=this.field[u*4+n];c&&(c-=1,c%4===n&&c<h&&(e[h]=!0,e[c]=!0))}}return this.field[3]!==4&&this.field[3]!=0&&(!t[2]&&this.field[2]===3&&(i[2]=!0),!e[7]&&this.field[7]===8&&(i[7]=!0)),this.field[0]!==1&&this.field[0]!=0&&(!t[1]&&this.field[1]===2&&(i[1]=!0),!e[4]&&this.field[4]===5&&(i[4]=!0)),this.field[12]!==13&&this.field[12]!=0&&(!t[13]&&this.field[13]===14&&(i[13]=!0),!e[8]&&this.field[8]===9&&(i[8]=!0)),{inColConflict:e,inRowConflict:t,inCornerConflict:i}}}const g=class g{constructor(t,e){this.field=t,this.empty=e}static fromArray(t){let e=0;for(let s=0;s<16;s++)if(t[s]===0){e=s;break}const i=new y(t.slice(0),e);return new g(i.hash64(),e)}canMove(t){return g.canMove(this.empty,t)}static canMove(t,e){const i=t%4;switch(e){case 0:return t>3;case 2:return t<12;case 3:return i>0;case 1:return i<3}return!1}makeMove(t){const[e,i]=g.makeMove(this.field,this.empty,t);return new g(e,i)}static makeMove(t,e,i){let s=e;switch(i){case 0:s=e-4;break;case 2:s=e+4;break;case 3:s=e-1;break;case 1:s=e+1;break}const n=g.masks[s];let o=t&n;const h=s-e;return o=h>0&&o>>g.shifts[h]||o<<g.shifts[-h],t=t&~n|o,e=s,[t,e]}makeMoveInPlace(t){return[this.field,this.empty]=g.makeMove(this.field,this.empty,t),this}copy(){return new g(this.field,this.empty)}hash64(){return this.field}isSolution(){return this.field===g.solution}};d(g,"masks",[]),d(g,"shifts",[]),d(g,"solution",new y([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,0],15).hash64());let w=g;for(let a=0;a<16;a++)w.masks[a]=0xfn<<BigInt(a*4),w.shifts[a]=BigInt(a*4);function p(a){return a.padEnd(16,"0").substring(0,16).split("").map(t=>parseInt(t,16))}p("123456789ABCDEF0"),p("1234067859ACDEBF"),p("5134207896ACDEBF"),p("16245A3709C8DEBF"),p("1723068459ACDEBF"),p("0723168459ACDEBF"),p("7023168459ACDEBF"),p("7203168459ACDEBF"),p("7283160459ACDEBF"),p("7283106459ACDEBF"),p("12345678A0BE9FCD"),p("51247308A6BE9FCD"),p("F2345678A0BE91DC"),p("75123804A6BE9FCD"),p("75AB2C416D389F0E"),p("04582E1DF79BCA36"),p("FE169B4C0A73D852"),p("D79F2E8A45106C3B"),p("DBE87A2C91F65034"),p("BAC0F478E19623D5");class Z{constructor(t,e){this.hash=t,this.newSet=e}solve(t,e,i){const s=new N;s.push({value:t,depth:0});const n=this.newSet();for(n.add(this.hash(t));!s.isEmpty();){const o=s.pop();for(let h=0;h<i.length;++h){const f=i[h];if(!f.correct(o.value))continue;const l=f.apply(o.value);if(n.add(this.hash(l))){if(l===e){const u=new Array(o.depth+1);u[o.depth]=f;for(let c=o;c.op;c=c.from)u[c.depth-1]=c.op;return{ok:!0,operations:u,visitedStates:n.size()}}s.push({from:o,op:f,value:l,depth:o.depth+1})}}}return{ok:!1,operations:[],visitedStates:n.size()}}}class _{constructor(){d(this,"data",new Int32Array(65536));d(this,"index",0)}push(t,e,i,s){if(this.index+=1,this.data.length<=this.index*4){const o=new Int32Array(this.data.length*2);for(let h=0;h<this.data.length;++h)o[h]=this.data[h];this.data=o}const n=(this.index-1)*4;this.data[n+0]=t,this.data[n+1]=e,this.data[n+2]=i,this.data[n+3]=s}from(t){return this.data[t*4+0]}op(t){return this.data[t*4+1]}value(t){return this.data[t*4+2]}depth(t){return this.data[t*4+3]}length(){return this.index}}class q{constructor(t,e){this.hash=t,this.newSet=e}solve(t,e,i){const s=new _;s.push(-1,-1,t,0);const n=this.newSet();n.add(this.hash(t));for(let o=0;o<s.length();++o){const h=s.value(o),f=s.depth(o);for(let l=0;l<i.length;++l){const u=i[l];if(!u.correct(h))continue;const c=u.apply(h),S=this.hash(c);if(n.add(S)){if(c===e){const k=new Array(f+1);k[f]=u;for(let m=o;s.op(m)>=0;m=s.from(m))k[s.depth(m)-1]=i[s.op(m)];return{ok:!0,operations:k,visitedStates:n.size()}}s.push(o,l,c,f+1)}}}return{ok:!1,operations:[],visitedStates:n.size()}}}class F{constructor(t,e=new T(t,this)){this.n=t,this.inverse=e}apply(t){return t+this.n}correct(){return!0}toString(){return`+${this.n}`}}class T{constructor(t,e=new F(t,this)){this.n=t,this.inverse=e}apply(t){return t-this.n}correct(){return!0}toString(){return`-${this.n}`}}class P{constructor(t,e=new Q(t,this)){this.n=t,this.inverse=e}apply(t){return t*this.n}correct(){return!0}toString(){return`*${this.n}`}}class Q{constructor(t,e=new P(t,this)){this.n=t,this.inverse=e}apply(t){return t/this.n}correct(t){return t%this.n===0}toString(){return`/${this.n}`}}class V{constructor(){d(this,"root");d(this,"count",0)}add(t){if(!this.root)return this.root={value:t,left:void 0,right:void 0},this.count++,!0;let e=this.root,i=this.root,s=!1;for(;e;)if(i=e,s=t<e.value,s)e=e.left;else if(e.value<t)e=e.right;else return!1;this.count++;const n={value:t,left:void 0,right:void 0};return s?i.left=n:i.right=n,!0}has(t){let e=this.root;for(;e;)if(t<e.value)e=e.left;else if(e.value<t)e=e.right;else return!0;return!1}size(){return this.count}}class J{constructor(){d(this,"data",Object.create(null));d(this,"count",0)}add(t){return this.data[t]?!1:(this.count++,this.data[t]=!0)}has(t){return this.data[t]}size(){return this.count}}class X{constructor(){d(this,"data",new Int32Array(65537));d(this,"max_iteration",15);d(this,"count",0);d(this,"hasZero",!1)}hash(t){return t=(t>>16^t)*73244475|0,t=(t>>16^t)*73244475|0,t=t>>16^t|0,t%this.data.length}add(t){if(t===0)return this.hasZero?!1:this.hasZero=!0;let e=this.hash(t);for(let i=0;i<this.max_iteration;++i){if(this.data[e]==t)return!1;if(this.data[e]==0)return this.data[e]=t,this.count++,!0;e=(e+1)%this.data.length}return this.rehash(),this.add(t)}has(t){if(t===0)return this.hasZero;let e=this.hash(t);for(let i=0;i<this.max_iteration;++i){if(this.data[e]==t)return!0;e=(e+1)%this.data.length}return!1}size(){return this.count}rehash(){const t=this.data;this.data=new Int32Array((this.data.length-1)*2+1);for(let e=0;e<t.length;++e)t[e]!=0&&this.add(t[e])}}function K(a){switch(a){case 0:return new J;case 1:return new V;case 2:return new X;default:throw new Error(`Unknown SetType ${a}`)}}function Y(a,t,e){const i=()=>K(t);switch(a){case 0:return new Z(e,i);case 1:return new q(e,i);default:throw new Error(`Unknown solver type ${a}`)}}const B=new P(2),U=new F(3),tt=new T(2),et=[B,U],it=[B,U,tt];onmessage=function(a){const t=a.data.task;st(a.data);try{switch(t.type){case"numbers":{const e=Y(t.algorithm,t.set,u=>u);let{start:i,finish:s}=t,n=t.operations=="two"?et:it;const o=performance.now();t.order==="backward"&&(n=n.map(u=>u.inverse),i=s,s=t.start);const h=e.solve(i,s,n),f=performance.now(),l=h.operations.map(u=>t.order=="forward"?u.toString():u.inverse.toString());t.order=="backward"&&l.reverse(),C(a.data,{type:"numbers",timeMs:f-o,nodesVisited:h.visitedStates,operations:l});break}case"gameOfFifteens":{const e=$(t.algorithm,t.heuristic),{start:i}=t,s=performance.now(),n=e.solve(i),o=performance.now();C(a.data,{type:"gameOfFifteens",timeMs:o-s,nodesVisited:n.visitedStates,operations:n.operations});break}default:b(a.data,"Unknown type of task");break}}catch(e){b(a.data,e instanceof Error?e.message:typeof e=="string"?e:JSON.stringify(e))}};function st(a){const t={taskId:a.taskId,status:"started",task:a.task,time:performance.now()};postMessage(t)}function C(a,t){const e={taskId:a.taskId,status:"resolved",task:a.task,result:t};postMessage(e)}function b(a,t){const e={taskId:a.taskId,status:"error",task:a.task,error:t};postMessage(e)}})();
