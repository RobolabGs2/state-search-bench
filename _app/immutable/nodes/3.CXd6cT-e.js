import{s as U,e as v,c as b,l as I,f as $,d as m,i as j,n as K,P as pe,a as y,b as F,Q as R,o as d,R as x,S as A,T as ue,B as fe,y as de,t as ee,g as te,m as ne,p as me,U as _e,V as he}from"../chunks/scheduler.CNnarYU7.js";import{S as M,i as G,f as ge,c as N,a as O,m as L,t as H,b as P,d as D}from"../chunks/index.D4A_hJtS.js";import{e as se,f as ae,p as ve,T as be,c as $e,S as le,a as re,b as Te,E as ke,N as Se}from"../chunks/TaskPanel.BE8mU5gS.js";function ie(a,t,s){const e=a.slice();return e[8]=t[s],e[9]=t,e[10]=s,e}function oe(a){let t,s,e,n,o,r;function l(){a[4].call(s,a[9],a[10])}function c(...u){return a[5](a[10],...u)}function k(...u){return a[6](a[10],...u)}return{c(){t=v("div"),s=v("input"),n=y(),this.h()},l(u){t=b(u,"DIV",{draggable:!0,class:!0});var i=I(t);s=b(i,"INPUT",{type:!0,class:!0}),n=F(i),i.forEach($),this.h()},h(){m(s,"type","number"),s.disabled=e=!a[1],m(s,"class","svelte-sttpqy"),m(t,"draggable",a[1]),m(t,"class","svelte-sttpqy"),R(t,"odd",(a[8]||0)%2),R(t,"empty",a[8]===null)},m(u,i){j(u,t,i),d(t,s),x(s,a[8]),d(t,n),o||(r=[A(s,"input",l),A(t,"dragstart",c),A(t,"drop",k),A(t,"dragover",Ee)],o=!0)},p(u,i){a=u,i&2&&e!==(e=!a[1])&&(s.disabled=e),i&1&&ue(s.value)!==a[8]&&x(s,a[8]),i&2&&m(t,"draggable",a[1]),i&1&&R(t,"odd",(a[8]||0)%2),i&1&&R(t,"empty",a[8]===null)},d(u){u&&$(t),o=!1,fe(r)}}}function we(a){let t,s=se(a[0]),e=[];for(let n=0;n<s.length;n+=1)e[n]=oe(ie(a,s,n));return{c(){t=v("article");for(let n=0;n<e.length;n+=1)e[n].c();this.h()},l(n){t=b(n,"ARTICLE",{class:!0});var o=I(t);for(let r=0;r<e.length;r+=1)e[r].l(o);o.forEach($),this.h()},h(){m(t,"class","svelte-sttpqy")},m(n,o){j(n,t,o);for(let r=0;r<e.length;r+=1)e[r]&&e[r].m(t,null)},p(n,[o]){if(o&15){s=se(n[0]);let r;for(r=0;r<s.length;r+=1){const l=ie(n,s,r);e[r]?e[r].p(l,o):(e[r]=oe(l),e[r].c(),e[r].m(t,null))}for(;r<e.length;r+=1)e[r].d(1);e.length=s.length}},i:K,o:K,d(n){n&&$(t),pe(e,n)}}}function Ee(a){a.preventDefault()}function Ie(a,t,s){let{position:e=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,null]}=t,{interactive:n=!1}=t,o=null;function r(i,f){o=i}function l(i,f){if(o===null)return;const T=e[o];s(0,e[o]=e[i],e),s(0,e[i]=T,e)}function c(i,f){i[f]=ue(this.value),s(0,e)}const k=(i,f)=>r(i),u=(i,f)=>l(i);return a.$$set=i=>{"position"in i&&s(0,e=i.position),"interactive"in i&&s(1,n=i.interactive)},[e,n,r,l,c,k,u]}class ye extends M{constructor(t){super(),G(this,t,Ie,we,U,{position:0,interactive:1})}}function Fe(a){let t,s,e,n,o="Начальная позиция:",r,l,c,k,u,i='<span class="svelte-edebo7">Алгоритм:</span>',f,T,w,_,V,q,z,C,S,J,E,Q,W;function ce(p){a[5](p)}let X={interactive:!0};return a[0]!==void 0&&(X.position=a[0]),S=new ye({props:X}),de.push(()=>ge(S,"position",ce)),{c(){t=v("main"),s=v("article"),e=v("section"),n=v("span"),n.textContent=o,r=y(),l=v("input"),k=y(),u=v("section"),u.innerHTML=i,f=y(),T=ee(a[1]),w=y(),_=v("button"),V=ee("Добавить задачу"),z=y(),C=v("article"),N(S.$$.fragment),this.h()},l(p){t=b(p,"MAIN",{class:!0});var h=I(t);s=b(h,"ARTICLE",{class:!0});var g=I(s);e=b(g,"SECTION",{class:!0});var B=I(e);n=b(B,"SPAN",{class:!0,"data-svelte-h":!0}),te(n)!=="svelte-1gs1uc0"&&(n.textContent=o),r=F(B),l=b(B,"INPUT",{class:!0}),B.forEach($),k=F(g),u=b(g,"SECTION",{class:!0,"data-svelte-h":!0}),te(u)!=="svelte-1vgajm6"&&(u.innerHTML=i),f=F(g),T=ne(g,a[1]),w=F(g),_=b(g,"BUTTON",{class:!0});var Y=I(_);V=ne(Y,"Добавить задачу"),Y.forEach($),g.forEach($),z=F(h),C=b(h,"ARTICLE",{class:!0});var Z=I(C);O(S.$$.fragment,Z),Z.forEach($),h.forEach($),this.h()},h(){m(n,"class","svelte-edebo7"),l.value=c=ae(a[0]),m(l,"class","svelte-edebo7"),m(e,"class","svelte-edebo7"),m(u,"class","svelte-edebo7"),_.disabled=q=a[1]!=="",m(_,"class","svelte-edebo7"),m(s,"class","svelte-edebo7"),m(C,"class","svelte-edebo7"),m(t,"class","svelte-edebo7")},m(p,h){j(p,t,h),d(t,s),d(s,e),d(e,n),d(e,r),d(e,l),d(s,k),d(s,u),d(s,f),d(s,T),d(s,w),d(s,_),d(_,V),d(t,z),d(t,C),L(S,C,null),E=!0,Q||(W=[A(l,"change",a[2]),A(_,"click",a[3])],Q=!0)},p(p,[h]){(!E||h&1&&c!==(c=ae(p[0]))&&l.value!==c)&&(l.value=c),(!E||h&2)&&me(T,p[1]),(!E||h&2&&q!==(q=p[1]!==""))&&(_.disabled=q);const g={};!J&&h&1&&(J=!0,g.position=p[0],_e(()=>J=!1)),S.$set(g)},i(p){E||(H(S.$$.fragment,p),E=!0)},o(p){P(S.$$.fragment,p),E=!1},d(p){p&&$(t),D(S),Q=!1,fe(W)}}}function Ce(a,t,s){const e=he();let n=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,null],o=!0,r="";function l(u){const i=u.target;s(0,n=ve(i.value).map(f=>f||null))}function c(){e("newTask",{type:"gameOfFifteens",start:n.map(u=>u||0)})}function k(u){n=u,s(0,n)}return a.$$.update=()=>{if(a.$$.dirty&17){const u=new Set([null,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]);let i=1;for(let f=0;f<16;f++){const T=n[f];if(u.delete(T),T===null){i+=f/4|0;continue}for(let w=f+1;w<16;w++){const _=n[w];_!==null&&T>_&&i++}}s(4,o=i%2==0),u.size!=0?s(1,r=`Не хватает фишек: ${Array.from(u.values()).map(f=>f===null?"<пустая>":f).join(", ")}`):o?s(1,r=""):s(1,r="Нерешаемая позиция")}},[n,r,l,c,o,k]}class Ae extends M{constructor(t){super(),G(this,t,Ce,Fe,U,{})}}function Ne(a){let t,s,e,n;function o(...l){return a[1](a[3],...l)}t=new Se({}),t.$on("newTask",o);function r(...l){return a[2](a[3],...l)}return e=new Ae({}),e.$on("newTask",r),{c(){N(t.$$.fragment),s=y(),N(e.$$.fragment)},l(l){O(t.$$.fragment,l),s=F(l),O(e.$$.fragment,l)},m(l,c){L(t,l,c),j(l,s,c),L(e,l,c),n=!0},p(l,c){a=l},i(l){n||(H(t.$$.fragment,l),H(e.$$.fragment,l),n=!0)},o(l){P(t.$$.fragment,l),P(e.$$.fragment,l),n=!1},d(l){l&&$(s),D(t,l),D(e,l)}}}function Oe(a){let t,s;return t=new be({props:{defaultTasks:a[0],$$slots:{default:[Ne,({run:e})=>({3:e}),({run:e})=>e?8:0]},$$scope:{ctx:a}}}),{c(){N(t.$$.fragment)},l(e){O(t.$$.fragment,e)},m(e,n){L(t,e,n),s=!0},p(e,[n]){const o={};n&24&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){s||(H(t.$$.fragment,e),s=!0)},o(e){P(t.$$.fragment,e),s=!1},d(e){D(t,e)}}}function Le(a){const t=[];for(const n of $e)t.push({type:"numbers",algorithm:le.BFS_LIST,operations:"two",order:"forward",start:n.start,finish:n.finish,set:re.HASH});for(const n of Te)t.push({type:"numbers",algorithm:le.BFS_LIST,operations:"three",order:"forward",start:n.start,finish:n.finish,set:re.HASH});for(const n of ke.filter(o=>o.length<20))t.push({type:"gameOfFifteens",start:n.field});return[t,(n,o)=>n(o.detail),(n,o)=>n(o.detail)]}class He extends M{constructor(t){super(),G(this,t,Le,Oe,U,{})}}function Pe(a){let t,s;return t=new He({}),{c(){N(t.$$.fragment)},l(e){O(t.$$.fragment,e)},m(e,n){L(t,e,n),s=!0},p:K,i(e){s||(H(t.$$.fragment,e),s=!0)},o(e){P(t.$$.fragment,e),s=!1},d(e){D(t,e)}}}class Re extends M{constructor(t){super(),G(this,t,null,Pe,U,{})}}export{Re as component};
